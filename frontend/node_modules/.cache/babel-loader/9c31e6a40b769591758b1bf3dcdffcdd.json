{"ast":null,"code":"'use strict';\n\nvar SockJS = require('sockjs-client/dist/sockjs');\n\nvar retries = 0;\nvar sock = null;\n\nvar socket = function initSocket(url, handlers) {\n  sock = new SockJS(url);\n\n  sock.onopen = function onopen() {\n    retries = 0;\n  };\n\n  sock.onclose = function onclose() {\n    if (retries === 0) {\n      handlers.close();\n    } // Try to reconnect.\n\n\n    sock = null; // After 10 retries stop trying, to prevent logspam.\n\n    if (retries <= 10) {\n      // Exponentially increase timeout to reconnect.\n      // Respectfully copied from the package `got`.\n      // eslint-disable-next-line no-mixed-operators, no-restricted-properties\n      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;\n      retries += 1;\n      setTimeout(function () {\n        socket(url, handlers);\n      }, retryInMs);\n    }\n  };\n\n  sock.onmessage = function onmessage(e) {\n    // This assumes that all data sent via the websocket is JSON.\n    var msg = JSON.parse(e.data);\n\n    if (handlers[msg.type]) {\n      handlers[msg.type](msg.data);\n    }\n  };\n};\n\nmodule.exports = socket;","map":{"version":3,"sources":["/Users/ore/Documents/docker-vorboss/frontend/node_modules/webpack-dev-server/client/socket.js"],"names":["SockJS","require","retries","sock","socket","initSocket","url","handlers","onopen","onclose","close","retryInMs","Math","pow","random","setTimeout","onmessage","e","msg","JSON","parse","data","type","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,MAAM,GAAGC,OAAO,CAAC,2BAAD,CAApB;;AAEA,IAAIC,OAAO,GAAG,CAAd;AACA,IAAIC,IAAI,GAAG,IAAX;;AAEA,IAAIC,MAAM,GAAG,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,QAAzB,EAAmC;AAC9CJ,EAAAA,IAAI,GAAG,IAAIH,MAAJ,CAAWM,GAAX,CAAP;;AAEAH,EAAAA,IAAI,CAACK,MAAL,GAAc,SAASA,MAAT,GAAkB;AAC9BN,IAAAA,OAAO,GAAG,CAAV;AACD,GAFD;;AAIAC,EAAAA,IAAI,CAACM,OAAL,GAAe,SAASA,OAAT,GAAmB;AAChC,QAAIP,OAAO,KAAK,CAAhB,EAAmB;AACjBK,MAAAA,QAAQ,CAACG,KAAT;AACD,KAH+B,CAKhC;;;AACAP,IAAAA,IAAI,GAAG,IAAP,CANgC,CAQhC;;AACA,QAAID,OAAO,IAAI,EAAf,EAAmB;AACjB;AACA;AACA;AACA,UAAIS,SAAS,GAAG,OAAOC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYX,OAAZ,CAAP,GAA8BU,IAAI,CAACE,MAAL,KAAgB,GAA9D;AACAZ,MAAAA,OAAO,IAAI,CAAX;AAEAa,MAAAA,UAAU,CAAC,YAAY;AACrBX,QAAAA,MAAM,CAACE,GAAD,EAAMC,QAAN,CAAN;AACD,OAFS,EAEPI,SAFO,CAAV;AAGD;AACF,GApBD;;AAsBAR,EAAAA,IAAI,CAACa,SAAL,GAAiB,SAASA,SAAT,CAAmBC,CAAnB,EAAsB;AACrC;AACA,QAAIC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACI,IAAb,CAAV;;AACA,QAAId,QAAQ,CAACW,GAAG,CAACI,IAAL,CAAZ,EAAwB;AACtBf,MAAAA,QAAQ,CAACW,GAAG,CAACI,IAAL,CAAR,CAAmBJ,GAAG,CAACG,IAAvB;AACD;AACF,GAND;AAOD,CApCD;;AAsCAE,MAAM,CAACC,OAAP,GAAiBpB,MAAjB","sourcesContent":["'use strict';\n\nvar SockJS = require('sockjs-client/dist/sockjs');\n\nvar retries = 0;\nvar sock = null;\n\nvar socket = function initSocket(url, handlers) {\n  sock = new SockJS(url);\n\n  sock.onopen = function onopen() {\n    retries = 0;\n  };\n\n  sock.onclose = function onclose() {\n    if (retries === 0) {\n      handlers.close();\n    }\n\n    // Try to reconnect.\n    sock = null;\n\n    // After 10 retries stop trying, to prevent logspam.\n    if (retries <= 10) {\n      // Exponentially increase timeout to reconnect.\n      // Respectfully copied from the package `got`.\n      // eslint-disable-next-line no-mixed-operators, no-restricted-properties\n      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;\n      retries += 1;\n\n      setTimeout(function () {\n        socket(url, handlers);\n      }, retryInMs);\n    }\n  };\n\n  sock.onmessage = function onmessage(e) {\n    // This assumes that all data sent via the websocket is JSON.\n    var msg = JSON.parse(e.data);\n    if (handlers[msg.type]) {\n      handlers[msg.type](msg.data);\n    }\n  };\n};\n\nmodule.exports = socket;"]},"metadata":{},"sourceType":"script"}